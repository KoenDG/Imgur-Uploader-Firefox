{"version":3,"file":"background.bundle.js","mappings":"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","sources":["webpack://imgur-uploader-firefox/./src/copy.js","webpack://imgur-uploader-firefox/./src/imgur.js","webpack://imgur-uploader-firefox/./src/storage.js","webpack://imgur-uploader-firefox/./node_modules/browser-request/index.js","webpack://imgur-uploader-firefox/webpack/bootstrap","webpack://imgur-uploader-firefox/./src/background.js"],"sourcesContent":["module.exports.setCopy = function(text){\r\n    const id = \"clipboard-textarea-hidden-id\";\r\n    let existsTextarea = document.getElementById(id);\r\n\r\n    if (!existsTextarea) {\r\n        console.log(\"Creating textarea\");\r\n        const textarea = document.createElement(\"textarea\");\r\n        textarea.id = id;\r\n        textarea.style.position = 'fixed';\r\n        textarea.style.top = -100;\r\n        textarea.style.left = -100;\r\n        textarea.style.width = '1px';\r\n        textarea.style.height = '1px';\r\n        textarea.style.padding = 0;\r\n        textarea.style.border = 'none';\r\n        textarea.style.outline = 'none';\r\n        textarea.style.boxShadow = 'none';\r\n        textarea.style.background = 'transparent';\r\n        document.querySelector(\"body\").appendChild(textarea);\r\n\r\n        existsTextarea = document.getElementById(id);\r\n    } else {\r\n        console.log(\"The textarea already exists :3\")\r\n    }\r\n    console.log(existsTextarea);\r\n    existsTextarea.value = text;\r\n    existsTextarea.select();\r\n\r\n    try {\r\n        const status = document.execCommand('copy');\r\n        if (!status) {\r\n            console.error(\"Cannot copy text\");\r\n        } else {\r\n            console.log(\"The text is now on the clipboard\");\r\n        }\r\n    } catch (err) {\r\n        console.log('Unable to copy.');\r\n    }\r\n}\r\n","const request = require(\"browser-request\");\r\nmodule.exports = class Uploader {\r\n    constructor() {\r\n        browser.storage.local.get(\"firefox-uploader-client-id\").then((result) => {\r\n            const backupList = ['a6bebdd6a51f656', 'f752792c52f4cdf', '474d8a50e7e752d', '9089d7837e30269', '6c6fa522da181b8', 'bbf63f907ae5614', '480391db79e87b6', 'ea76f402e22007a'];\r\n            if (typeof result['firefox-uploader-client-id'] !== \"undefined\") {\r\n                this.clientID = result['firefox-uploader-client-id'];\r\n                console.log(result['firefox-uploader-client-id']);\r\n            } else {\r\n                this.clientID = backupList[Math.floor(Math.random() * backupList.length)];\r\n            }\r\n            console.log(this.clientID);\r\n        });\r\n    }\r\n    update(){\r\n        browser.storage.local.get(\"firefox-uploader-client-id\").then((result) => {\r\n            const backupList = ['a6bebdd6a51f656', 'f752792c52f4cdf', '474d8a50e7e752d', '9089d7837e30269', '6c6fa522da181b8', 'bbf63f907ae5614', '480391db79e87b6', 'ea76f402e22007a'];\r\n            if (typeof result['firefox-uploader-client-id'] !== \"undefined\") {\r\n                this.clientID = result['firefox-uploader-client-id'];\r\n                console.log(result['firefox-uploader-client-id']);\r\n            } else {\r\n                this.clientID = backupList[Math.floor(Math.random() * backupList.length)];\r\n            }\r\n            console.log(this.clientID);\r\n        });\r\n    }\r\n    uuid() {\r\n\r\n        let d = Date.now();\r\n        if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n            d += performance.now(); //use high-precision timer if available\r\n        }\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            const r = (d + Math.random() * 16) % 16 | 0;\r\n            d = Math.floor(d / 16);\r\n            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n\r\n    }\r\n    imageReader(image) {\r\n        let reader = new FileReader();\r\n        return new Promise((resolve, reject) => {\r\n            reader.onload = (event) => {\r\n                resolve(event.target.result.split(\"base64,\")[1]);\r\n            };\r\n\r\n            reader.onerror = () => {\r\n                return reject(this);\r\n            };\r\n\r\n            reader.readAsDataURL(image);\r\n\r\n        })\r\n    }\r\n\r\n    uploadToImgur(file) {\r\n        const that = this;\r\n        return new Promise((resolve, reject) => {\r\n            console.log(this);\r\n            console.log(that.uuid());\r\n            const options = {\r\n                url: \"https://api.imgur.com/3/image\",\r\n                headers: {\r\n                    authorization: \"Client-ID \" + that.clientID\r\n                },\r\n                json: {\r\n                    image: file\r\n                }\r\n\r\n            };\r\n            console.log(options);\r\n            request.post(options, function (error, res, body) {\r\n                console.log(body.data);\r\n                if (body.data.error) {\r\n                    reject(body.data);\r\n                } else {\r\n                    resolve(body.data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    uploader(image) {\r\n        return this.imageReader(image).then(this.uploadToImgur.bind(this));\r\n    }\r\n\r\n    remove(deletehash){\r\n        const that = this;\r\n        return new Promise((resolve, reject) => {\r\n          const options = {\r\n              method: \"delete\",\r\n              url: \"https://api.imgur.com/3/image/\" + deletehash,\r\n              headers: {\r\n                  authorization: \"Client-ID \" + that.clientID\r\n              }\r\n\r\n          };\r\n          console.log(options);\r\n          request(options, function (error, res, body) {\r\n              const result = JSON.parse(body);\r\n              if (!result.data) {\r\n                  reject(result);\r\n              } else {\r\n                  resolve(result);\r\n              }\r\n          });\r\n      });\r\n    }\r\n\r\n}\r\n","module.exports = class Storage {\r\n    constructor() {\r\n        browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            if (Object.getOwnPropertyNames(obj).length == 0) {\r\n                console.log(\"test\");\r\n                browser.storage.local.set({\r\n                    'firefox-uploader-imgur': []\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    add(image) {\r\n        return new Promise((resolve, reject) => {\r\n            const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n                const send = obj['firefox-uploader-imgur'];\r\n\r\n                image['viewable'] = true;\r\n\r\n                send.push(image);\r\n                console.log(send);\r\n                browser.storage.local.set({\r\n                    'firefox-uploader-imgur': send\r\n                }).then(() => {\r\n                    resolve(\"test\");\r\n                });\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    remove(imageId) {\r\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            const send = [];\r\n            for (let img of obj['firefox-uploader-imgur']) {\r\n                if (img.id != imageId) {\r\n                    send.push(img);\r\n                }\r\n            }\r\n            browser.storage.local.set({\r\n                'firefox-uploader-imgur': send\r\n            });\r\n        });\r\n    }\r\n    change(imageId, status) {\r\n        if (!imageId instanceof Array) {\r\n          imageId = [imageId];\r\n        }\r\n\r\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            const send = [];\r\n            for (let img of obj['firefox-uploader-imgur']) {\r\n                if (imageId.indexOf(img.id) >= 0) {\r\n                    console.log(imageId);\r\n                    console.log(status);\r\n                    for (let property in status) {\r\n                        if (status.hasOwnProperty(property)) {\r\n                            img[property] = status[property];\r\n                        }\r\n                    }\r\n                    console.log(img);\r\n                    send.push(img);\r\n                } else {\r\n                    send.push(img);\r\n                }\r\n            }\r\n            browser.storage.local.set({\r\n                'firefox-uploader-imgur': send\r\n            });\r\n        });\r\n\r\n    }\r\n    removeAll() {\r\n        browser.storage.local.set({\r\n            'firefox-uploader-imgur': []\r\n        })\r\n    }\r\n}\r\n","// Browser Request\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// UMD HEADER START \n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n  }\n}(this, function () {\n// UMD HEADER END\n\nvar XHR = XMLHttpRequest\nif (!XHR) throw new Error('missing XMLHttpRequest')\nrequest.log = {\n  'trace': noop, 'debug': noop, 'info': noop, 'warn': noop, 'error': noop\n}\n\nvar DEFAULT_TIMEOUT = 3 * 60 * 1000 // 3 minutes\n\n//\n// request\n//\n\nfunction request(options, callback) {\n  // The entry-point to the API: prep the options object and pass the real work to run_xhr.\n  if(typeof callback !== 'function')\n    throw new Error('Bad callback given: ' + callback)\n\n  if(!options)\n    throw new Error('No options given')\n\n  var options_onResponse = options.onResponse; // Save this for later.\n\n  if(typeof options === 'string')\n    options = {'uri':options};\n  else\n    options = JSON.parse(JSON.stringify(options)); // Use a duplicate for mutating.\n\n  options.onResponse = options_onResponse // And put it back.\n\n  if (options.verbose) request.log = getLogger();\n\n  if(options.url) {\n    options.uri = options.url;\n    delete options.url;\n  }\n\n  if(!options.uri && options.uri !== \"\")\n    throw new Error(\"options.uri is a required argument\");\n\n  if(typeof options.uri != \"string\")\n    throw new Error(\"options.uri must be a string\");\n\n  var unsupported_options = ['proxy', '_redirectsFollowed', 'maxRedirects', 'followRedirect']\n  for (var i = 0; i < unsupported_options.length; i++)\n    if(options[ unsupported_options[i] ])\n      throw new Error(\"options.\" + unsupported_options[i] + \" is not supported\")\n\n  options.callback = callback\n  options.method = options.method || 'GET';\n  options.headers = options.headers || {};\n  options.body    = options.body || null\n  options.timeout = options.timeout || request.DEFAULT_TIMEOUT\n\n  if(options.headers.host)\n    throw new Error(\"Options.headers.host is not supported\");\n\n  if(options.json) {\n    options.headers.accept = options.headers.accept || 'application/json'\n    if(options.method !== 'GET')\n      options.headers['content-type'] = 'application/json'\n\n    if(typeof options.json !== 'boolean')\n      options.body = JSON.stringify(options.json)\n    else if(typeof options.body !== 'string')\n      options.body = JSON.stringify(options.body)\n  }\n  \n  //BEGIN QS Hack\n  var serialize = function(obj) {\n    var str = [];\n    for(var p in obj)\n      if (obj.hasOwnProperty(p)) {\n        str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n      }\n    return str.join(\"&\");\n  }\n  \n  if(options.qs){\n    var qs = (typeof options.qs == 'string')? options.qs : serialize(options.qs);\n    if(options.uri.indexOf('?') !== -1){ //no get params\n        options.uri = options.uri+'&'+qs;\n    }else{ //existing get params\n        options.uri = options.uri+'?'+qs;\n    }\n  }\n  //END QS Hack\n  \n  //BEGIN FORM Hack\n  var multipart = function(obj) {\n    //todo: support file type (useful?)\n    var result = {};\n    result.boundry = '-------------------------------'+Math.floor(Math.random()*1000000000);\n    var lines = [];\n    for(var p in obj){\n        if (obj.hasOwnProperty(p)) {\n            lines.push(\n                '--'+result.boundry+\"\\n\"+\n                'Content-Disposition: form-data; name=\"'+p+'\"'+\"\\n\"+\n                \"\\n\"+\n                obj[p]+\"\\n\"\n            );\n        }\n    }\n    lines.push( '--'+result.boundry+'--' );\n    result.body = lines.join('');\n    result.length = result.body.length;\n    result.type = 'multipart/form-data; boundary='+result.boundry;\n    return result;\n  }\n  \n  if(options.form){\n    if(typeof options.form == 'string') throw('form name unsupported');\n    if(options.method === 'POST'){\n        var encoding = (options.encoding || 'application/x-www-form-urlencoded').toLowerCase();\n        options.headers['content-type'] = encoding;\n        switch(encoding){\n            case 'application/x-www-form-urlencoded':\n                options.body = serialize(options.form).replace(/%20/g, \"+\");\n                break;\n            case 'multipart/form-data':\n                var multi = multipart(options.form);\n                //options.headers['content-length'] = multi.length;\n                options.body = multi.body;\n                options.headers['content-type'] = multi.type;\n                break;\n            default : throw new Error('unsupported encoding:'+encoding);\n        }\n    }\n  }\n  //END FORM Hack\n\n  // If onResponse is boolean true, call back immediately when the response is known,\n  // not when the full request is complete.\n  options.onResponse = options.onResponse || noop\n  if(options.onResponse === true) {\n    options.onResponse = callback\n    options.callback = noop\n  }\n\n  // XXX Browsers do not like this.\n  //if(options.body)\n  //  options.headers['content-length'] = options.body.length;\n\n  // HTTP basic authentication\n  if(!options.headers.authorization && options.auth)\n    options.headers.authorization = 'Basic ' + b64_enc(options.auth.username + ':' + options.auth.password);\n\n  return run_xhr(options)\n}\n\nvar req_seq = 0\nfunction run_xhr(options) {\n  var xhr = new XHR\n    , timed_out = false\n    , is_cors = is_crossDomain(options.uri)\n    , supports_cors = ('withCredentials' in xhr)\n\n  req_seq += 1\n  xhr.seq_id = req_seq\n  xhr.id = req_seq + ': ' + options.method + ' ' + options.uri\n  xhr._id = xhr.id // I know I will type \"_id\" from habit all the time.\n\n  if(is_cors && !supports_cors) {\n    var cors_err = new Error('Browser does not support cross-origin request: ' + options.uri)\n    cors_err.cors = 'unsupported'\n    return options.callback(cors_err, xhr)\n  }\n\n  xhr.timeoutTimer = setTimeout(too_late, options.timeout)\n  function too_late() {\n    timed_out = true\n    var er = new Error('ETIMEDOUT')\n    er.code = 'ETIMEDOUT'\n    er.duration = options.timeout\n\n    request.log.error('Timeout', { 'id':xhr._id, 'milliseconds':options.timeout })\n    return options.callback(er, xhr)\n  }\n\n  // Some states can be skipped over, so remember what is still incomplete.\n  var did = {'response':false, 'loading':false, 'end':false}\n\n  xhr.onreadystatechange = on_state_change\n  xhr.open(options.method, options.uri, true) // asynchronous\n  if(is_cors)\n    xhr.withCredentials = !! options.withCredentials\n  xhr.send(options.body)\n  return xhr\n\n  function on_state_change(event) {\n    if(timed_out)\n      return request.log.debug('Ignoring timed out state change', {'state':xhr.readyState, 'id':xhr.id})\n\n    request.log.debug('State change', {'state':xhr.readyState, 'id':xhr.id, 'timed_out':timed_out})\n\n    if(xhr.readyState === XHR.OPENED) {\n      request.log.debug('Request started', {'id':xhr.id})\n      for (var key in options.headers)\n        xhr.setRequestHeader(key, options.headers[key])\n    }\n\n    else if(xhr.readyState === XHR.HEADERS_RECEIVED)\n      on_response()\n\n    else if(xhr.readyState === XHR.LOADING) {\n      on_response()\n      on_loading()\n    }\n\n    else if(xhr.readyState === XHR.DONE) {\n      on_response()\n      on_loading()\n      on_end()\n    }\n  }\n\n  function on_response() {\n    if(did.response)\n      return\n\n    did.response = true\n    request.log.debug('Got response', {'id':xhr.id, 'status':xhr.status})\n    clearTimeout(xhr.timeoutTimer)\n    xhr.statusCode = xhr.status // Node request compatibility\n\n    // Detect failed CORS requests.\n    if(is_cors && xhr.statusCode == 0) {\n      var cors_err = new Error('CORS request rejected: ' + options.uri)\n      cors_err.cors = 'rejected'\n\n      // Do not process this request further.\n      did.loading = true\n      did.end = true\n\n      return options.callback(cors_err, xhr)\n    }\n\n    options.onResponse(null, xhr)\n  }\n\n  function on_loading() {\n    if(did.loading)\n      return\n\n    did.loading = true\n    request.log.debug('Response body loading', {'id':xhr.id})\n    // TODO: Maybe simulate \"data\" events by watching xhr.responseText\n  }\n\n  function on_end() {\n    if(did.end)\n      return\n\n    did.end = true\n    request.log.debug('Request done', {'id':xhr.id})\n\n    xhr.body = xhr.responseText\n    if(options.json) {\n      try        { xhr.body = JSON.parse(xhr.responseText) }\n      catch (er) { return options.callback(er, xhr)        }\n    }\n\n    options.callback(null, xhr, xhr.body)\n  }\n\n} // request\n\nrequest.withCredentials = false;\nrequest.DEFAULT_TIMEOUT = DEFAULT_TIMEOUT;\n\n//\n// defaults\n//\n\nrequest.defaults = function(options, requester) {\n  var def = function (method) {\n    var d = function (params, callback) {\n      if(typeof params === 'string')\n        params = {'uri': params};\n      else {\n        params = JSON.parse(JSON.stringify(params));\n      }\n      for (var i in options) {\n        if (params[i] === undefined) params[i] = options[i]\n      }\n      return method(params, callback)\n    }\n    return d\n  }\n  var de = def(request)\n  de.get = def(request.get)\n  de.post = def(request.post)\n  de.put = def(request.put)\n  de.head = def(request.head)\n  return de\n}\n\n//\n// HTTP method shortcuts\n//\n\nvar shortcuts = [ 'get', 'put', 'post', 'head' ];\nshortcuts.forEach(function(shortcut) {\n  var method = shortcut.toUpperCase();\n  var func   = shortcut.toLowerCase();\n\n  request[func] = function(opts) {\n    if(typeof opts === 'string')\n      opts = {'method':method, 'uri':opts};\n    else {\n      opts = JSON.parse(JSON.stringify(opts));\n      opts.method = method;\n    }\n\n    var args = [opts].concat(Array.prototype.slice.apply(arguments, [1]));\n    return request.apply(this, args);\n  }\n})\n\n//\n// CouchDB shortcut\n//\n\nrequest.couch = function(options, callback) {\n  if(typeof options === 'string')\n    options = {'uri':options}\n\n  // Just use the request API to do JSON.\n  options.json = true\n  if(options.body)\n    options.json = options.body\n  delete options.body\n\n  callback = callback || noop\n\n  var xhr = request(options, couch_handler)\n  return xhr\n\n  function couch_handler(er, resp, body) {\n    if(er)\n      return callback(er, resp, body)\n\n    if((resp.statusCode < 200 || resp.statusCode > 299) && body.error) {\n      // The body is a Couch JSON object indicating the error.\n      er = new Error('CouchDB error: ' + (body.error.reason || body.error.error))\n      for (var key in body)\n        er[key] = body[key]\n      return callback(er, resp, body);\n    }\n\n    return callback(er, resp, body);\n  }\n}\n\n//\n// Utility\n//\n\nfunction noop() {}\n\nfunction getLogger() {\n  var logger = {}\n    , levels = ['trace', 'debug', 'info', 'warn', 'error']\n    , level, i\n\n  for(i = 0; i < levels.length; i++) {\n    level = levels[i]\n\n    logger[level] = noop\n    if(typeof console !== 'undefined' && console && console[level])\n      logger[level] = formatted(console, level)\n  }\n\n  return logger\n}\n\nfunction formatted(obj, method) {\n  return formatted_logger\n\n  function formatted_logger(str, context) {\n    if(typeof context === 'object')\n      str += ' ' + JSON.stringify(context)\n\n    return obj[method].call(obj, str)\n  }\n}\n\n// Return whether a URL is a cross-domain request.\nfunction is_crossDomain(url) {\n  var rurl = /^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/\n\n  // jQuery #8138, IE may throw an exception when accessing\n  // a field from window.location if document.domain has been set\n  var ajaxLocation\n  try { ajaxLocation = location.href }\n  catch (e) {\n    // Use the href attribute of an A element since IE will modify it given document.location\n    ajaxLocation = document.createElement( \"a\" );\n    ajaxLocation.href = \"\";\n    ajaxLocation = ajaxLocation.href;\n  }\n\n  var ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || []\n    , parts = rurl.exec(url.toLowerCase() )\n\n  var result = !!(\n    parts &&\n    (  parts[1] != ajaxLocParts[1]\n    || parts[2] != ajaxLocParts[2]\n    || (parts[3] || (parts[1] === \"http:\" ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === \"http:\" ? 80 : 443))\n    )\n  )\n\n  //console.debug('is_crossDomain('+url+') -> ' + result)\n  return result\n}\n\n// MIT License from http://phpjs.org/functions/base64_encode:358\nfunction b64_enc (data) {\n    // Encodes string using MIME base64 algorithm\n    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc=\"\", tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    // assume utf8 data\n    // data = this.utf8_encode(data+'');\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1<<16 | o2<<8 | o3;\n\n        h1 = bits>>18 & 0x3f;\n        h2 = bits>>12 & 0x3f;\n        h3 = bits>>6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n        break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n        break;\n    }\n\n    return enc;\n}\n    return request;\n//UMD FOOTER START\n}));\n//UMD FOOTER END\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const Uploader = require(\"./imgur.js\");\r\nconst Storage = require(\"./storage.js\");\r\nconst copy = require(\"./copy.js\");\r\n\r\nconst uploader = new Uploader();\r\nconst storage = new Storage();\r\nbrowser.browserAction.setIcon({\r\n    path: \"../icons/favicon.png\"\r\n});\r\n\r\nbrowser.storage.local.get(\"firefox-uploader-announce\").then(res => {\r\n    if(res['firefox-uploader-announce'] === undefined){\r\n        browser.storage.local.set({\"firefox-uploader-announce\":{'1.6.0':'true'}}).then(()=>{\r\n            const creating = browser.tabs.create({\r\n                url: \"../templates/announce/1.6.0.html\"\r\n            });\r\n        });\r\n    }\r\n    else{\r\n        if(res['firefox-uploader-announce']['1.6.0'] === undefined){\r\n            res['firefox-uploader-announce']['1.6.0'] = \"true\";\r\n            browser.storage.local.set({\"firefox-uploader-announce\": res['firefox-uploader-announce']});\r\n            const creating = browser.tabs.create({\r\n                url: \"../templates/announce/1.6.0.html\"\r\n            });\r\n        };\r\n    }\r\n\r\n\r\n})\r\n\r\n\r\n\r\nfunction onCreated() {\r\n    if (browser.runtime.lastError) {\r\n        console.log(\"error creating item:\" + browser.runtime.lastError);\r\n    } else {\r\n        console.log(\"item created successfully\");\r\n    }\r\n}\r\n\r\nbrowser.storage.onChanged.addListener((changes, area) => {\r\n    if (typeof changes['firefox-uploader-client-id'] !== \"undefined\") {\r\n        uploader.update();\r\n    }\r\n});\r\n\r\nfunction uploadSuccessNotification() {\r\n    browser.notifications.create(\"Imgur Uploader\", {\r\n        \"type\": \"basic\",\r\n        \"title\": \"Imgur Uploader\",\r\n        \"message\": \"Upload successful!\",\r\n        \"iconUrl\": \"../../icons/favicon.png\"\r\n    });\r\n}\r\n\r\nfunction uploadFailNotification() {\r\n\r\n    browser.notifications.create(\"Imgur Uploader\", {\r\n        \"type\": \"basic\",\r\n        \"title\": \"Imgur Uploader\",\r\n        \"message\": \"Upload Failed\",\r\n        \"iconUrl\": \"../../icons/favicon.png\"\r\n    });\r\n}\r\n\r\nfunction uploadLocalNotification(){\r\n    browser.notifications.create(\"Imgur Uploader\", {\r\n        \"type\": \"basic\",\r\n        \"title\": \"Imgur Uploader\",\r\n        \"message\": \"Please use 'Add image' to upload local file\",\r\n        \"iconUrl\": \"../../icons/favicon.png\"\r\n    });\r\n}\r\n\r\nbrowser.menus.create({\r\n    id: \"image-select\",\r\n    type: \"normal\",\r\n    title: \"Upload to Imgur\",\r\n    contexts: [\"image\"],\r\n    checked: false\r\n}, onCreated);\r\n\r\nbrowser.menus.onClicked.addListener(function (info, tab) {\r\n\r\n    if (info.mediaType == \"image\") {\r\n        console.log(info.srcUrl);\r\n        console.log(info);\r\n        console.log(uploader);\r\n        if (info.srcUrl.startsWith(\"data\")) {\r\n            uploader.uploadToImgur(info.srcUrl.split(\"base64,\")[1]).then((e) => {\r\n                browser.storage.local.get('firefox-uploader-auto-copy').then((value) => {\r\n                    if (value['firefox-uploader-auto-copy'] == true) {\r\n                        browser.tabs.query({\r\n                            currentWindow: true,\r\n                            active: true\r\n                        }).then(result => {\r\n                            console.log(result);\r\n                            browser.tabs.sendMessage(result[0].id, {\r\n                                link: e.link\r\n                            });\r\n                        })\r\n                    }\r\n                });\r\n\r\n                storage.add(e);\r\n            }).then(uploadSuccessNotification, uploadFailNotification);\r\n        } else if (info.srcUrl.startsWith(\"file\")) {\r\n            uploadLocalNotification();\r\n        } else {\r\n            uploader.uploadToImgur(info.srcUrl).then((e) => {\r\n                browser.storage.local.get('firefox-uploader-auto-copy').then((value) => {\r\n                    if (value['firefox-uploader-auto-copy'] == true) {\r\n                        browser.tabs.query({\r\n                            currentWindow: true,\r\n                            active: true\r\n                        }).then(result => {\r\n                            console.log(result);\r\n                            browser.tabs.sendMessage(result[0].id, {\r\n                                link: e.link\r\n                            });\r\n                        })\r\n                    }\r\n                });\r\n\r\n                storage.add(e);\r\n            }).then(uploadSuccessNotification, uploadFailNotification);\r\n        }\r\n    }\r\n\r\n});\r\n\r\nfunction handleMessage(request, sender, res) {\r\n    if(request.task == \"upload\"){\r\n        if (request.file) {\r\n            res({\r\n                success: true\r\n            });\r\n            uploader.uploader(request.file).then(e => {\r\n                console.log(e);\r\n                browser.storage.local.get('firefox-uploader-auto-copy').then((value) => {\r\n                    if (value['firefox-uploader-auto-copy'] == true) {\r\n                        browser.tabs.query({\r\n                            active: true\r\n                        }).then(result => {\r\n                            console.log(result);\r\n                            browser.tabs.sendMessage(result[0].id, {\r\n                                link: e.link\r\n                            });\r\n                        })\r\n                    }\r\n                });\r\n\r\n                storage.add(e);\r\n            }).then(uploadSuccessNotification, uploadFailNotification);\r\n        } else if (request.url) {\r\n            res({\r\n                success: true\r\n            });\r\n            uploader.uploadToImgur(request.url.split(\"base64,\")[1]).then(e => {\r\n                console.log(e);\r\n                storage.add(e);\r\n                browser.storage.local.get('firefox-uploader-auto-copy').then((value) => {\r\n                    console.log(\"storing\");\r\n                    if (value['firefox-uploader-auto-copy'] == true) {\r\n                        browser.tabs.query({\r\n                            active: true\r\n                        }).then(result => {\r\n                            console.log(result);\r\n                            browser.tabs.sendMessage(result[0].id, {\r\n                                link: e.link\r\n                            });\r\n                        })\r\n                    }\r\n                });\r\n            }).then(uploadSuccessNotification, uploadFailNotification);\r\n        }\r\n\r\n\r\n    }\r\n    else if(request.task == \"auth\"){\r\n        console.log(request);\r\n        browser.storage.local.set({'firefox-uploader-auth': request}).then(() => {\r\n            res({response: \"auth set\"});\r\n        })\r\n    }\r\n}\r\n\r\nbrowser.runtime.onMessage.addListener(handleMessage);\r\n"],"names":["module","exports","setCopy","text","id","existsTextarea","document","getElementById","console","log","textarea","createElement","style","position","top","left","width","height","padding","border","outline","boxShadow","background","querySelector","appendChild","value","select","execCommand","error","err","request","require","browser","storage","local","get","then","result","backupList","clientID","Math","floor","random","length","d","Date","now","performance","replace","c","r","toString","image","reader","FileReader","Promise","resolve","reject","onload","event","target","split","onerror","readAsDataURL","file","that","this","uuid","options","url","headers","authorization","json","post","res","body","data","imageReader","uploadToImgur","bind","deletehash","method","JSON","parse","obj","Object","getOwnPropertyNames","set","send","push","imageId","img","status","Array","indexOf","property","hasOwnProperty","XHR","XMLHttpRequest","Error","noop","callback","options_onResponse","onResponse","stringify","verbose","level","i","logger","levels","formatted","getLogger","uri","unsupported_options","timeout","DEFAULT_TIMEOUT","host","accept","serialize","str","p","encodeURIComponent","join","qs","form","encoding","toLowerCase","multi","boundry","lines","type","multipart","auth","h1","h2","h3","h4","bits","b64","ac","enc","tmp_arr","charCodeAt","charAt","slice","b64_enc","username","password","xhr","timed_out","is_cors","ajaxLocation","rurl","location","href","e","ajaxLocParts","exec","parts","is_crossDomain","supports_cors","req_seq","seq_id","_id","cors_err","cors","too_late","er","code","duration","timeoutTimer","setTimeout","did","onreadystatechange","on_state_change","open","withCredentials","debug","readyState","OPENED","key","setRequestHeader","HEADERS_RECEIVED","on_response","LOADING","on_loading","DONE","on_end","response","clearTimeout","statusCode","loading","end","responseText","run_xhr","context","call","defaults","requester","def","params","undefined","de","put","head","forEach","shortcut","toUpperCase","opts","args","concat","prototype","apply","arguments","couch","resp","reason","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","Uploader","Storage","uploader","uploadSuccessNotification","notifications","create","uploadFailNotification","browserAction","setIcon","path","tabs","onChanged","addListener","changes","area","update","menus","title","contexts","checked","runtime","lastError","onClicked","info","tab","mediaType","srcUrl","startsWith","query","currentWindow","active","sendMessage","link","add","onMessage","sender","task","success"],"sourceRoot":""}