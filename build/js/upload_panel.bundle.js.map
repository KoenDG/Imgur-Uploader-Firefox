{"version":3,"file":"upload_panel.bundle.js","mappings":"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","sources":["webpack://imgur-uploader-firefox/./src/imgur.js","webpack://imgur-uploader-firefox/./src/storage.js","webpack://imgur-uploader-firefox/./node_modules/browser-request/index.js","webpack://imgur-uploader-firefox/webpack/bootstrap","webpack://imgur-uploader-firefox/./src/upload_panel.js"],"sourcesContent":["const request = require(\"browser-request\");\r\nmodule.exports = class Uploader {\r\n    constructor() {\r\n        browser.storage.local.get(\"firefox-uploader-client-id\").then((result) => {\r\n            const backupList = ['a6bebdd6a51f656', 'f752792c52f4cdf', '474d8a50e7e752d', '9089d7837e30269', '6c6fa522da181b8', 'bbf63f907ae5614', '480391db79e87b6', 'ea76f402e22007a'];\r\n            if (typeof result['firefox-uploader-client-id'] !== \"undefined\") {\r\n                this.clientID = result['firefox-uploader-client-id'];\r\n                console.log(result['firefox-uploader-client-id']);\r\n            } else {\r\n                this.clientID = backupList[Math.floor(Math.random() * backupList.length)];\r\n            }\r\n            console.log(this.clientID);\r\n        });\r\n    }\r\n    update(){\r\n        browser.storage.local.get(\"firefox-uploader-client-id\").then((result) => {\r\n            const backupList = ['a6bebdd6a51f656', 'f752792c52f4cdf', '474d8a50e7e752d', '9089d7837e30269', '6c6fa522da181b8', 'bbf63f907ae5614', '480391db79e87b6', 'ea76f402e22007a'];\r\n            if (typeof result['firefox-uploader-client-id'] !== \"undefined\") {\r\n                this.clientID = result['firefox-uploader-client-id'];\r\n                console.log(result['firefox-uploader-client-id']);\r\n            } else {\r\n                this.clientID = backupList[Math.floor(Math.random() * backupList.length)];\r\n            }\r\n            console.log(this.clientID);\r\n        });\r\n    }\r\n    uuid() {\r\n\r\n        let d = Date.now();\r\n        if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n            d += performance.now(); //use high-precision timer if available\r\n        }\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            const r = (d + Math.random() * 16) % 16 | 0;\r\n            d = Math.floor(d / 16);\r\n            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n\r\n    }\r\n    imageReader(image) {\r\n        let reader = new FileReader();\r\n        return new Promise((resolve, reject) => {\r\n            reader.onload = (event) => {\r\n                resolve(event.target.result.split(\"base64,\")[1]);\r\n            };\r\n\r\n            reader.onerror = () => {\r\n                return reject(this);\r\n            };\r\n\r\n            reader.readAsDataURL(image);\r\n\r\n        })\r\n    }\r\n\r\n    uploadToImgur(file) {\r\n        const that = this;\r\n        return new Promise((resolve, reject) => {\r\n            console.log(this);\r\n            console.log(that.uuid());\r\n            const options = {\r\n                url: \"https://api.imgur.com/3/image\",\r\n                headers: {\r\n                    authorization: \"Client-ID \" + that.clientID\r\n                },\r\n                json: {\r\n                    image: file\r\n                }\r\n\r\n            };\r\n            console.log(options);\r\n            request.post(options, function (error, res, body) {\r\n                console.log(body.data);\r\n                if (body.data.error) {\r\n                    reject(body.data);\r\n                } else {\r\n                    resolve(body.data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    uploader(image) {\r\n        return this.imageReader(image).then(this.uploadToImgur.bind(this));\r\n    }\r\n\r\n    remove(deletehash){\r\n        const that = this;\r\n        return new Promise((resolve, reject) => {\r\n          const options = {\r\n              method: \"delete\",\r\n              url: \"https://api.imgur.com/3/image/\" + deletehash,\r\n              headers: {\r\n                  authorization: \"Client-ID \" + that.clientID\r\n              }\r\n\r\n          };\r\n          console.log(options);\r\n          request(options, function (error, res, body) {\r\n              const result = JSON.parse(body);\r\n              if (!result.data) {\r\n                  reject(result);\r\n              } else {\r\n                  resolve(result);\r\n              }\r\n          });\r\n      });\r\n    }\r\n\r\n}\r\n","module.exports = class Storage {\r\n    constructor() {\r\n        browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            if (Object.getOwnPropertyNames(obj).length == 0) {\r\n                console.log(\"test\");\r\n                browser.storage.local.set({\r\n                    'firefox-uploader-imgur': []\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    add(image) {\r\n        return new Promise((resolve, reject) => {\r\n            const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n                const send = obj['firefox-uploader-imgur'];\r\n\r\n                image['viewable'] = true;\r\n\r\n                send.push(image);\r\n                console.log(send);\r\n                browser.storage.local.set({\r\n                    'firefox-uploader-imgur': send\r\n                }).then(() => {\r\n                    resolve(\"test\");\r\n                });\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    remove(imageId) {\r\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            const send = [];\r\n            for (let img of obj['firefox-uploader-imgur']) {\r\n                if (img.id != imageId) {\r\n                    send.push(img);\r\n                }\r\n            }\r\n            browser.storage.local.set({\r\n                'firefox-uploader-imgur': send\r\n            });\r\n        });\r\n    }\r\n    change(imageId, status) {\r\n        if (!imageId instanceof Array) {\r\n          imageId = [imageId];\r\n        }\r\n\r\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            const send = [];\r\n            for (let img of obj['firefox-uploader-imgur']) {\r\n                if (imageId.indexOf(img.id) >= 0) {\r\n                    console.log(imageId);\r\n                    console.log(status);\r\n                    for (let property in status) {\r\n                        if (status.hasOwnProperty(property)) {\r\n                            img[property] = status[property];\r\n                        }\r\n                    }\r\n                    console.log(img);\r\n                    send.push(img);\r\n                } else {\r\n                    send.push(img);\r\n                }\r\n            }\r\n            browser.storage.local.set({\r\n                'firefox-uploader-imgur': send\r\n            });\r\n        });\r\n\r\n    }\r\n    removeAll() {\r\n        browser.storage.local.set({\r\n            'firefox-uploader-imgur': []\r\n        })\r\n    }\r\n}\r\n","// Browser Request\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// UMD HEADER START \n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n  }\n}(this, function () {\n// UMD HEADER END\n\nvar XHR = XMLHttpRequest\nif (!XHR) throw new Error('missing XMLHttpRequest')\nrequest.log = {\n  'trace': noop, 'debug': noop, 'info': noop, 'warn': noop, 'error': noop\n}\n\nvar DEFAULT_TIMEOUT = 3 * 60 * 1000 // 3 minutes\n\n//\n// request\n//\n\nfunction request(options, callback) {\n  // The entry-point to the API: prep the options object and pass the real work to run_xhr.\n  if(typeof callback !== 'function')\n    throw new Error('Bad callback given: ' + callback)\n\n  if(!options)\n    throw new Error('No options given')\n\n  var options_onResponse = options.onResponse; // Save this for later.\n\n  if(typeof options === 'string')\n    options = {'uri':options};\n  else\n    options = JSON.parse(JSON.stringify(options)); // Use a duplicate for mutating.\n\n  options.onResponse = options_onResponse // And put it back.\n\n  if (options.verbose) request.log = getLogger();\n\n  if(options.url) {\n    options.uri = options.url;\n    delete options.url;\n  }\n\n  if(!options.uri && options.uri !== \"\")\n    throw new Error(\"options.uri is a required argument\");\n\n  if(typeof options.uri != \"string\")\n    throw new Error(\"options.uri must be a string\");\n\n  var unsupported_options = ['proxy', '_redirectsFollowed', 'maxRedirects', 'followRedirect']\n  for (var i = 0; i < unsupported_options.length; i++)\n    if(options[ unsupported_options[i] ])\n      throw new Error(\"options.\" + unsupported_options[i] + \" is not supported\")\n\n  options.callback = callback\n  options.method = options.method || 'GET';\n  options.headers = options.headers || {};\n  options.body    = options.body || null\n  options.timeout = options.timeout || request.DEFAULT_TIMEOUT\n\n  if(options.headers.host)\n    throw new Error(\"Options.headers.host is not supported\");\n\n  if(options.json) {\n    options.headers.accept = options.headers.accept || 'application/json'\n    if(options.method !== 'GET')\n      options.headers['content-type'] = 'application/json'\n\n    if(typeof options.json !== 'boolean')\n      options.body = JSON.stringify(options.json)\n    else if(typeof options.body !== 'string')\n      options.body = JSON.stringify(options.body)\n  }\n  \n  //BEGIN QS Hack\n  var serialize = function(obj) {\n    var str = [];\n    for(var p in obj)\n      if (obj.hasOwnProperty(p)) {\n        str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n      }\n    return str.join(\"&\");\n  }\n  \n  if(options.qs){\n    var qs = (typeof options.qs == 'string')? options.qs : serialize(options.qs);\n    if(options.uri.indexOf('?') !== -1){ //no get params\n        options.uri = options.uri+'&'+qs;\n    }else{ //existing get params\n        options.uri = options.uri+'?'+qs;\n    }\n  }\n  //END QS Hack\n  \n  //BEGIN FORM Hack\n  var multipart = function(obj) {\n    //todo: support file type (useful?)\n    var result = {};\n    result.boundry = '-------------------------------'+Math.floor(Math.random()*1000000000);\n    var lines = [];\n    for(var p in obj){\n        if (obj.hasOwnProperty(p)) {\n            lines.push(\n                '--'+result.boundry+\"\\n\"+\n                'Content-Disposition: form-data; name=\"'+p+'\"'+\"\\n\"+\n                \"\\n\"+\n                obj[p]+\"\\n\"\n            );\n        }\n    }\n    lines.push( '--'+result.boundry+'--' );\n    result.body = lines.join('');\n    result.length = result.body.length;\n    result.type = 'multipart/form-data; boundary='+result.boundry;\n    return result;\n  }\n  \n  if(options.form){\n    if(typeof options.form == 'string') throw('form name unsupported');\n    if(options.method === 'POST'){\n        var encoding = (options.encoding || 'application/x-www-form-urlencoded').toLowerCase();\n        options.headers['content-type'] = encoding;\n        switch(encoding){\n            case 'application/x-www-form-urlencoded':\n                options.body = serialize(options.form).replace(/%20/g, \"+\");\n                break;\n            case 'multipart/form-data':\n                var multi = multipart(options.form);\n                //options.headers['content-length'] = multi.length;\n                options.body = multi.body;\n                options.headers['content-type'] = multi.type;\n                break;\n            default : throw new Error('unsupported encoding:'+encoding);\n        }\n    }\n  }\n  //END FORM Hack\n\n  // If onResponse is boolean true, call back immediately when the response is known,\n  // not when the full request is complete.\n  options.onResponse = options.onResponse || noop\n  if(options.onResponse === true) {\n    options.onResponse = callback\n    options.callback = noop\n  }\n\n  // XXX Browsers do not like this.\n  //if(options.body)\n  //  options.headers['content-length'] = options.body.length;\n\n  // HTTP basic authentication\n  if(!options.headers.authorization && options.auth)\n    options.headers.authorization = 'Basic ' + b64_enc(options.auth.username + ':' + options.auth.password);\n\n  return run_xhr(options)\n}\n\nvar req_seq = 0\nfunction run_xhr(options) {\n  var xhr = new XHR\n    , timed_out = false\n    , is_cors = is_crossDomain(options.uri)\n    , supports_cors = ('withCredentials' in xhr)\n\n  req_seq += 1\n  xhr.seq_id = req_seq\n  xhr.id = req_seq + ': ' + options.method + ' ' + options.uri\n  xhr._id = xhr.id // I know I will type \"_id\" from habit all the time.\n\n  if(is_cors && !supports_cors) {\n    var cors_err = new Error('Browser does not support cross-origin request: ' + options.uri)\n    cors_err.cors = 'unsupported'\n    return options.callback(cors_err, xhr)\n  }\n\n  xhr.timeoutTimer = setTimeout(too_late, options.timeout)\n  function too_late() {\n    timed_out = true\n    var er = new Error('ETIMEDOUT')\n    er.code = 'ETIMEDOUT'\n    er.duration = options.timeout\n\n    request.log.error('Timeout', { 'id':xhr._id, 'milliseconds':options.timeout })\n    return options.callback(er, xhr)\n  }\n\n  // Some states can be skipped over, so remember what is still incomplete.\n  var did = {'response':false, 'loading':false, 'end':false}\n\n  xhr.onreadystatechange = on_state_change\n  xhr.open(options.method, options.uri, true) // asynchronous\n  if(is_cors)\n    xhr.withCredentials = !! options.withCredentials\n  xhr.send(options.body)\n  return xhr\n\n  function on_state_change(event) {\n    if(timed_out)\n      return request.log.debug('Ignoring timed out state change', {'state':xhr.readyState, 'id':xhr.id})\n\n    request.log.debug('State change', {'state':xhr.readyState, 'id':xhr.id, 'timed_out':timed_out})\n\n    if(xhr.readyState === XHR.OPENED) {\n      request.log.debug('Request started', {'id':xhr.id})\n      for (var key in options.headers)\n        xhr.setRequestHeader(key, options.headers[key])\n    }\n\n    else if(xhr.readyState === XHR.HEADERS_RECEIVED)\n      on_response()\n\n    else if(xhr.readyState === XHR.LOADING) {\n      on_response()\n      on_loading()\n    }\n\n    else if(xhr.readyState === XHR.DONE) {\n      on_response()\n      on_loading()\n      on_end()\n    }\n  }\n\n  function on_response() {\n    if(did.response)\n      return\n\n    did.response = true\n    request.log.debug('Got response', {'id':xhr.id, 'status':xhr.status})\n    clearTimeout(xhr.timeoutTimer)\n    xhr.statusCode = xhr.status // Node request compatibility\n\n    // Detect failed CORS requests.\n    if(is_cors && xhr.statusCode == 0) {\n      var cors_err = new Error('CORS request rejected: ' + options.uri)\n      cors_err.cors = 'rejected'\n\n      // Do not process this request further.\n      did.loading = true\n      did.end = true\n\n      return options.callback(cors_err, xhr)\n    }\n\n    options.onResponse(null, xhr)\n  }\n\n  function on_loading() {\n    if(did.loading)\n      return\n\n    did.loading = true\n    request.log.debug('Response body loading', {'id':xhr.id})\n    // TODO: Maybe simulate \"data\" events by watching xhr.responseText\n  }\n\n  function on_end() {\n    if(did.end)\n      return\n\n    did.end = true\n    request.log.debug('Request done', {'id':xhr.id})\n\n    xhr.body = xhr.responseText\n    if(options.json) {\n      try        { xhr.body = JSON.parse(xhr.responseText) }\n      catch (er) { return options.callback(er, xhr)        }\n    }\n\n    options.callback(null, xhr, xhr.body)\n  }\n\n} // request\n\nrequest.withCredentials = false;\nrequest.DEFAULT_TIMEOUT = DEFAULT_TIMEOUT;\n\n//\n// defaults\n//\n\nrequest.defaults = function(options, requester) {\n  var def = function (method) {\n    var d = function (params, callback) {\n      if(typeof params === 'string')\n        params = {'uri': params};\n      else {\n        params = JSON.parse(JSON.stringify(params));\n      }\n      for (var i in options) {\n        if (params[i] === undefined) params[i] = options[i]\n      }\n      return method(params, callback)\n    }\n    return d\n  }\n  var de = def(request)\n  de.get = def(request.get)\n  de.post = def(request.post)\n  de.put = def(request.put)\n  de.head = def(request.head)\n  return de\n}\n\n//\n// HTTP method shortcuts\n//\n\nvar shortcuts = [ 'get', 'put', 'post', 'head' ];\nshortcuts.forEach(function(shortcut) {\n  var method = shortcut.toUpperCase();\n  var func   = shortcut.toLowerCase();\n\n  request[func] = function(opts) {\n    if(typeof opts === 'string')\n      opts = {'method':method, 'uri':opts};\n    else {\n      opts = JSON.parse(JSON.stringify(opts));\n      opts.method = method;\n    }\n\n    var args = [opts].concat(Array.prototype.slice.apply(arguments, [1]));\n    return request.apply(this, args);\n  }\n})\n\n//\n// CouchDB shortcut\n//\n\nrequest.couch = function(options, callback) {\n  if(typeof options === 'string')\n    options = {'uri':options}\n\n  // Just use the request API to do JSON.\n  options.json = true\n  if(options.body)\n    options.json = options.body\n  delete options.body\n\n  callback = callback || noop\n\n  var xhr = request(options, couch_handler)\n  return xhr\n\n  function couch_handler(er, resp, body) {\n    if(er)\n      return callback(er, resp, body)\n\n    if((resp.statusCode < 200 || resp.statusCode > 299) && body.error) {\n      // The body is a Couch JSON object indicating the error.\n      er = new Error('CouchDB error: ' + (body.error.reason || body.error.error))\n      for (var key in body)\n        er[key] = body[key]\n      return callback(er, resp, body);\n    }\n\n    return callback(er, resp, body);\n  }\n}\n\n//\n// Utility\n//\n\nfunction noop() {}\n\nfunction getLogger() {\n  var logger = {}\n    , levels = ['trace', 'debug', 'info', 'warn', 'error']\n    , level, i\n\n  for(i = 0; i < levels.length; i++) {\n    level = levels[i]\n\n    logger[level] = noop\n    if(typeof console !== 'undefined' && console && console[level])\n      logger[level] = formatted(console, level)\n  }\n\n  return logger\n}\n\nfunction formatted(obj, method) {\n  return formatted_logger\n\n  function formatted_logger(str, context) {\n    if(typeof context === 'object')\n      str += ' ' + JSON.stringify(context)\n\n    return obj[method].call(obj, str)\n  }\n}\n\n// Return whether a URL is a cross-domain request.\nfunction is_crossDomain(url) {\n  var rurl = /^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/\n\n  // jQuery #8138, IE may throw an exception when accessing\n  // a field from window.location if document.domain has been set\n  var ajaxLocation\n  try { ajaxLocation = location.href }\n  catch (e) {\n    // Use the href attribute of an A element since IE will modify it given document.location\n    ajaxLocation = document.createElement( \"a\" );\n    ajaxLocation.href = \"\";\n    ajaxLocation = ajaxLocation.href;\n  }\n\n  var ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || []\n    , parts = rurl.exec(url.toLowerCase() )\n\n  var result = !!(\n    parts &&\n    (  parts[1] != ajaxLocParts[1]\n    || parts[2] != ajaxLocParts[2]\n    || (parts[3] || (parts[1] === \"http:\" ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === \"http:\" ? 80 : 443))\n    )\n  )\n\n  //console.debug('is_crossDomain('+url+') -> ' + result)\n  return result\n}\n\n// MIT License from http://phpjs.org/functions/base64_encode:358\nfunction b64_enc (data) {\n    // Encodes string using MIME base64 algorithm\n    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc=\"\", tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    // assume utf8 data\n    // data = this.utf8_encode(data+'');\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1<<16 | o2<<8 | o3;\n\n        h1 = bits>>18 & 0x3f;\n        h2 = bits>>12 & 0x3f;\n        h3 = bits>>6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n        break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n        break;\n    }\n\n    return enc;\n}\n    return request;\n//UMD FOOTER START\n}));\n//UMD FOOTER END\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const Uploader = require(\"./imgur.js\");\r\nconst Storage = require(\"./storage.js\");\r\n\r\nconst uploader = new Uploader();\r\nconst storage = new Storage();\r\n\r\nfunction getExtension(filename) {\r\n    const parts = filename.split('.');\r\n    return parts[parts.length - 1];\r\n}\r\n\r\nfunction isImage(filename) {\r\n    const ext = getExtension(filename);\r\n    switch (ext.toLowerCase()) {\r\n    case 'jpg':\r\n    case 'jpeg':\r\n    case 'gif':\r\n    case 'png':\r\n        //etc\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction removeEvent() {\r\n    document.querySelector(\"#add-image\").removeEventListener('drop', uploadFile, false);\r\n    document.querySelector(\"#add-file\").removeEventListener('change', uploadFile, false);\r\n}\r\n\r\nfunction uploadFile(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const files = e.target.files || e.dataTransfer.files;\r\n    if (isImage(files[0].name)) {\r\n        removeEvent();\r\n        document.querySelector(\"#drag-icon\").setAttribute(\"src\", \"../build/image/loading.png\");\r\n        console.log(document.querySelector(\"#drag-icon\").getAttribute(\"src\"));\r\n        browser.runtime.sendMessage({\r\n            task: \"upload\",\r\n            file: files[0]\r\n        }).then((msg) => {\r\n            if (msg.success == true) {\r\n                const winId = browser.windows.WINDOW_ID_CURRENT;\r\n                const removing = browser.windows.remove(winId);\r\n            }\r\n        });\r\n    } else {\r\n        document.querySelector(\".error\").innerHTML = \"Invalid file format. Please try again\";\r\n    }\r\n\r\n}\r\n\r\nfunction uploadUrl(url){\r\n    document.querySelector(\"#drag-icon\").setAttribute(\"src\", \"../build/image/loading.png\");\r\n    console.log(document.querySelector(\"#drag-icon\").getAttribute(\"src\"));\r\n    browser.runtime.sendMessage({\r\n        task: \"upload\",\r\n        url: url\r\n    }).then((msg) => {\r\n        if (msg.success == true) {\r\n            const winId = browser.windows.WINDOW_ID_CURRENT;\r\n            const removing = browser.windows.remove(winId);\r\n        }\r\n    });\r\n}\r\n\r\ndocument.querySelector(\"#add-image\").addEventListener('dragover', function (e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.style.background = \"grey\";\r\n}, false);\r\n\r\ndocument.querySelector(\"#add-image\").addEventListener('dragleave', function () {\r\n    this.style.background = \"white\";\r\n});\r\n\r\ndocument.querySelector(\"#add-image\").addEventListener('drop', function (e) {\r\n    this.style.background = \"white\";\r\n}, false);\r\n\r\ndocument.querySelector(\"#add-image\").addEventListener('drop', uploadFile, false);\r\n\r\ndocument.querySelector(\"#click-image\").addEventListener('click', function () {\r\n\r\n    document.querySelector(\"#add-file\").click();\r\n    return false;\r\n}, false);\r\n\r\ndocument.querySelector(\"#add-file\").addEventListener('change', uploadFile, false);\r\n\r\nwindow.addEventListener(\"paste\", (e) => {\r\n    const items = e.clipboardData.items;\r\n    for (let i = 0; i < items.length; i++) {\r\n        if (items[i].type.indexOf(\"image\") == -1) continue;\r\n        console.log(\"test\");\r\n        const blob = items[i].getAsFile();\r\n\r\n        const mycanvas = document.createElement(\"canvas\");\r\n        const ctx = mycanvas.getContext('2d');\r\n        const img = new Image();\r\n        img.onload = function () {\r\n            mycanvas.width = this.width;\r\n            mycanvas.height = this.height;\r\n            ctx.drawImage(img, 0, 0);\r\n            console.log(mycanvas.toDataURL());\r\n            uploadUrl(mycanvas.toDataURL());\r\n        };\r\n\r\n        const URLObj = window.URL || window.webkitURL;\r\n\r\n        img.src = URLObj.createObjectURL(blob);\r\n    }\r\n});\r\n"],"names":["request","require","module","exports","browser","storage","local","get","then","result","backupList","clientID","console","log","Math","floor","random","length","d","Date","now","performance","replace","c","r","toString","image","reader","FileReader","Promise","resolve","reject","onload","event","target","split","onerror","readAsDataURL","file","that","this","uuid","options","url","headers","authorization","json","post","error","res","body","data","imageReader","uploadToImgur","bind","deletehash","method","JSON","parse","obj","Object","getOwnPropertyNames","set","send","push","imageId","img","id","status","Array","indexOf","property","hasOwnProperty","XHR","XMLHttpRequest","Error","noop","callback","options_onResponse","onResponse","stringify","verbose","level","i","logger","levels","formatted","getLogger","uri","unsupported_options","timeout","DEFAULT_TIMEOUT","host","accept","serialize","str","p","encodeURIComponent","join","qs","form","encoding","toLowerCase","multi","boundry","lines","type","multipart","auth","h1","h2","h3","h4","bits","b64","ac","enc","tmp_arr","charCodeAt","charAt","slice","b64_enc","username","password","xhr","timed_out","is_cors","ajaxLocation","rurl","location","href","e","document","createElement","ajaxLocParts","exec","parts","is_crossDomain","supports_cors","req_seq","seq_id","_id","cors_err","cors","too_late","er","code","duration","timeoutTimer","setTimeout","did","onreadystatechange","on_state_change","open","withCredentials","debug","readyState","OPENED","key","setRequestHeader","HEADERS_RECEIVED","on_response","LOADING","on_loading","DONE","on_end","response","clearTimeout","statusCode","loading","end","responseText","run_xhr","context","call","defaults","requester","def","params","undefined","de","put","head","forEach","shortcut","toUpperCase","opts","args","concat","prototype","apply","arguments","couch","resp","reason","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","Uploader","Storage","uploadFile","stopPropagation","preventDefault","files","dataTransfer","filename","ext","getExtension","isImage","name","querySelector","innerHTML","removeEventListener","setAttribute","getAttribute","runtime","sendMessage","task","msg","success","winId","windows","WINDOW_ID_CURRENT","remove","addEventListener","style","background","click","window","items","clipboardData","blob","getAsFile","mycanvas","ctx","getContext","Image","width","height","drawImage","toDataURL","URLObj","URL","webkitURL","src","createObjectURL"],"sourceRoot":""}