(()=>{"use strict";var e={171:e=>{e.exports.setCopy=function(e){var t="clipboard-textarea-hidden-id",o=document.getElementById(t);if(o)console.log("The textarea already exists :3");else{console.log("Creating textarea");var r=document.createElement("textarea");r.id=t,r.style.position="fixed",r.style.top=-100,r.style.left=-100,r.style.width="1px",r.style.height="1px",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",document.querySelector("body").appendChild(r),o=document.getElementById(t)}console.log(o),o.value=e,o.select();try{document.execCommand("copy")?console.log("The text is now on the clipboard"):console.error("Cannot copy text")}catch(e){console.log("Unable to copy.")}}},19:e=>{var t=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),browser.storage.local.get("firefox-uploader-imgur").then((function(e){0==Object.getOwnPropertyNames(e).length&&(console.log("test"),browser.storage.local.set({"firefox-uploader-imgur":[]}))}))}return t(e,[{key:"add",value:function(e){return new Promise((function(t,o){browser.storage.local.get("firefox-uploader-imgur").then((function(o){var r=o["firefox-uploader-imgur"];e.viewable=!0,r.push(e),console.log(r),browser.storage.local.set({"firefox-uploader-imgur":r}).then((function(){t("test")}))}))}))}},{key:"remove",value:function(e){browser.storage.local.get("firefox-uploader-imgur").then((function(t){var o=[],r=!0,l=!1,n=void 0;try{for(var a,i=t["firefox-uploader-imgur"][Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var c=a.value;c.id!=e&&o.push(c)}}catch(e){l=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(l)throw n}}browser.storage.local.set({"firefox-uploader-imgur":o})}))}},{key:"change",value:function(e,t){!e instanceof Array&&(e=[e]),browser.storage.local.get("firefox-uploader-imgur").then((function(o){var r=[],l=!0,n=!1,a=void 0;try{for(var i,c=o["firefox-uploader-imgur"][Symbol.iterator]();!(l=(i=c.next()).done);l=!0){var s=i.value;if(e.indexOf(s.id)>=0){for(var u in console.log(e),console.log(t),t)t.hasOwnProperty(u)&&(s[u]=t[u]);console.log(s),r.push(s)}else r.push(s)}}catch(e){n=!0,a=e}finally{try{!l&&c.return&&c.return()}finally{if(n)throw a}}browser.storage.local.set({"firefox-uploader-imgur":r})}))}},{key:"removeAll",value:function(){browser.storage.local.set({"firefox-uploader-imgur":[]})}}]),e}()}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(()=>{var e=new(o(19)),t=o(171);function r(e,t){return e.className.split(" ").indexOf(t)>-1}browser.storage.local.get("firefox-uploader-imgur").then((function(e){console.log(e);var t=!0,o=!1,r=void 0;try{for(var l,n=e["firefox-uploader-imgur"].reverse()[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var a=l.value;console.log(a),null!=a&&null!=a.link&&0!=a.viewable&&$(document.getElementById("image-list")).append('<div class="callout small image-url" data-closable data-url="'+a.link+'">            <p><img src="https://i.imgur.com/'+a.id+'.jpg" class="preview"> <span class="link">'+a.link+'</span><button class="copy-clipboard" id="'+a.link+'-copy">Copy</button></p>            <button class="close-button" aria-label="Dismiss alert" type="button"  id="'+a.id+'-close" data-close>            <span aria-hidden="true" class="close-button-bubble">&times;</span>            </button>        </div>')}}catch(e){o=!0,r=e}finally{try{!t&&n.return&&n.return()}finally{if(o)throw r}}})),browser.storage.local.get("firefox-uploader-auto-copy").then((function(e){document.getElementById("clipboard-switch").checked=e["firefox-uploader-auto-copy"]})),document.addEventListener("click",(function(o){if(r(o.target,"close-button")&&(console.log(o.target.id),e.change(o.target.id.split("-close")[0],{viewable:!1})),r(o.target,"close-button-bubble")&&(console.log(o.target.id),e.change(o.target.parentNode.id.split("-close")[0],{viewable:!1})),r(o.target,"copy-clipboard")){var l=o.target.id.split("-copy")[0];t.setCopy(l)}if(r(o.target,"clear-all")){for(var n=document.querySelectorAll(".image-url"),a=[],i=0;i<n.length;i++)console.log(n[i].querySelector(".close-button").id),a.push(n[i].querySelector(".close-button").id.split("-close")[0]),n[i].parentNode.removeChild(n[i]);e.change(a,{viewable:!1})}}),!1),document.getElementById("clipboard-switch").addEventListener("change",(function(e){console.log(e.target.checked),browser.storage.local.set({"firefox-uploader-auto-copy":e.target.checked})})),document.addEventListener("mouseover",(function(e){if(r(e.target,"preview")){console.log(e.pageX),console.log(e.pageY),console.log(e.target.attributes);var t=$(document.querySelector("div.viewer"));t.show().css({left:"100px",top:e.pageY-30}),t.children("img").attr("src",e.target.getAttribute("src"))}}),!1),document.addEventListener("mouseout",(function(e){r(e.target,"preview")&&$(document.querySelector("div.viewer")).hide()}),!1),document.querySelector("#add-image").addEventListener("click",(function(){browser.windows.create({type:"detached_panel",titlePreface:"Upload Image",url:"../templates/panel.html",width:400,height:200,left:100,allowScriptsToClose:!0}),console.log("test")})),document.querySelector("#options").addEventListener("click",(function(){browser.tabs.create({url:"settings/options.html"})}))})()})();
//# sourceMappingURL=popup.bundle.js.map