{"version":3,"file":"popup.bundle.js","mappings":"kCAAAA,EAAOC,QAAQC,QAAU,SAASC,GAC9B,IAAMC,EAAK,+BACPC,EAAiBC,SAASC,eAAeH,GAE7C,GAAKC,EAkBDG,QAAQC,IAAI,sCAlBK,CACjBD,QAAQC,IAAI,qBACZ,IAAMC,EAAWJ,SAASK,cAAc,YACxCD,EAASN,GAAKA,EACdM,EAASE,MAAMC,SAAW,QAC1BH,EAASE,MAAME,KAAO,IACtBJ,EAASE,MAAMG,MAAQ,IACvBL,EAASE,MAAMI,MAAQ,MACvBN,EAASE,MAAMK,OAAS,MACxBP,EAASE,MAAMM,QAAU,EACzBR,EAASE,MAAMO,OAAS,OACxBT,EAASE,MAAMQ,QAAU,OACzBV,EAASE,MAAMS,UAAY,OAC3BX,EAASE,MAAMU,WAAa,cAC5BhB,SAASiB,cAAc,QAAQC,YAAYd,GAE3CL,EAAiBC,SAASC,eAAeH,EAC5C,CAGDI,QAAQC,IAAIJ,GACZA,EAAeoB,MAAQtB,EACvBE,EAAeqB,SAEf,IACmBpB,SAASqB,YAAY,QAIhCnB,QAAQC,IAAI,oCAFZD,QAAQoB,MAAM,mBAMrB,CAFC,MAAOC,GACLrB,QAAQC,IAAI,kBACf,CACJ,C,kQCtCDT,EAAOC,QAAP,WACI,c,4FAAc,SACV6B,QAAQC,QAAQC,MAAMC,IAAI,0BAA0BC,MAAK,SAACC,GACR,GAA1CC,OAAOC,oBAAoBF,GAAKG,SAChC9B,QAAQC,IAAI,QACZqB,QAAQC,QAAQC,MAAMO,IAAI,CACtB,yBAA0B,KAGrC,GAEJ,CAXL,sCAaQC,GACA,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACJb,QAAQC,QAAQC,MAAMC,IAAI,0BAA0BC,MAAK,SAACC,GAC3E,IAAMS,EAAOT,EAAI,0BAEjBK,EAAA,UAAoB,EAEpBI,EAAKC,KAAKL,GACVhC,QAAQC,IAAImC,GACZd,QAAQC,QAAQC,MAAMO,IAAI,CACtB,yBAA0BK,IAC3BV,MAAK,WACJQ,EAAQ,OACX,GACJ,GACJ,GAEJ,GA9BL,6BAgCWI,GACkBhB,QAAQC,QAAQC,MAAMC,IAAI,0BAA0BC,MAAK,SAACC,GAC3E,IAAMS,EAAO,GADsE,uBAEnF,YAAgBT,EAAI,0BAApB,+CAA+C,KAAtCY,EAAsC,QACvCA,EAAI3C,IAAM0C,GACVF,EAAKC,KAAKE,EAEjB,CANkF,8EAOnFjB,QAAQC,QAAQC,MAAMO,IAAI,CACtB,yBAA0BK,GAEjC,GACJ,GA5CL,6BA6CWE,EAASE,IACPF,aAAmBG,QACtBH,EAAU,CAACA,IAGQhB,QAAQC,QAAQC,MAAMC,IAAI,0BAA0BC,MAAK,SAACC,GAC3E,IAAMS,EAAO,GADsE,uBAEnF,YAAgBT,EAAI,0BAApB,+CAA+C,KAAtCY,EAAsC,QAC3C,GAAID,EAAQI,QAAQH,EAAI3C,KAAO,EAAG,CAG9B,IAAK,IAAI+C,KAFT3C,QAAQC,IAAIqC,GACZtC,QAAQC,IAAIuC,GACSA,EACbA,EAAOI,eAAeD,KACtBJ,EAAII,GAAYH,EAAOG,IAG/B3C,QAAQC,IAAIsC,GACZH,EAAKC,KAAKE,EACb,MACGH,EAAKC,KAAKE,EAEjB,CAhBkF,8EAiBnFjB,QAAQC,QAAQC,MAAMO,IAAI,CACtB,yBAA0BK,GAEjC,GAEJ,GAxEL,kCA0EQd,QAAQC,QAAQC,MAAMO,IAAI,CACtB,yBAA0B,IAEjC,KA7EL,I,GCCIc,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAavD,QAGrB,IAAID,EAASqD,EAAyBE,GAAY,CAGjDtD,QAAS,CAAC,GAOX,OAHAyD,EAAoBH,GAAUvD,EAAQA,EAAOC,QAASqD,GAG/CtD,EAAOC,OACf,C,MCtBA,IACM8B,EAAU,IADA4B,EAAQ,KAElBC,EAAOD,EAAQ,KAuBrB,SAASE,EAASC,EAAMC,GACpB,OAAOD,EAAKC,UAAUC,MAAM,KAAKd,QAAQa,IAAc,CAC1D,CAvBDjC,QAAQC,QAAQC,MAAMC,IAAI,0BAA0BC,MAAK,SAACT,GACtDjB,QAAQC,IAAIgB,GADmD,2BAE/D,YAAaA,EAAM,0BAA0BwC,UAA7C,+CAAuD,KAA/CC,EAA+C,QACnD1D,QAAQC,IAAIyD,GACJT,MAALS,GAA4BT,MAAVS,EAAEC,MAAmC,GAAdD,EAAEE,UAG9CC,EAAE/D,SAASC,eAAe,eAAe+D,OAAO,gEAAgEJ,EAAEC,KAAK,kDAChFD,EAAE9D,GAAG,6CAA6C8D,EAAEC,KAAK,6CAA6CD,EAAEC,KAAK,kHACnED,EAAE9D,GAAG,wIAKzF,CAd8D,8EAelE,IAED0B,QAAQC,QAAQC,MAAMC,IAAI,8BAA8BC,MAAK,SAACT,GAC1DnB,SAASC,eAAe,oBAAoBgE,QAAU9C,EAAM,6BAC/D,IAKDnB,SAASkE,iBAAiB,SAAS,SAAUC,GAUzC,GATIZ,EAASY,EAAEC,OAAQ,kBACnBlE,QAAQC,IAAIgE,EAAEC,OAAOtE,IACrB2B,EAAQ4C,OAAOF,EAAEC,OAAOtE,GAAG4D,MAAM,UAAU,GAAI,CAAC,UAAY,KAG7DH,EAASY,EAAEC,OAAQ,yBAClBlE,QAAQC,IAAIgE,EAAEC,OAAOtE,IACrB2B,EAAQ4C,OAAOF,EAAEC,OAAOE,WAAWxE,GAAG4D,MAAM,UAAU,GAAI,CAAC,UAAY,KAExEH,EAASY,EAAEC,OAAQ,kBAAkB,CAEpC,IAAMP,EAAOM,EAAEC,OAAOtE,GAAG4D,MAAM,SAAS,GACxCJ,EAAK1D,QAAQiE,EAChB,CACD,GAAIN,EAASY,EAAEC,OAAQ,aAAa,CAKhC,IAFA,IAAMP,EAAO7D,SAASuE,iBAAiB,cACjCC,EAAiB,GACfC,EAAI,EAAEA,EAAEZ,EAAK7B,OAAOyC,IACxBvE,QAAQC,IAAI0D,EAAKY,GAAGxD,cAAc,iBAAiBnB,IACnD0E,EAAejC,KAAKsB,EAAKY,GAAGxD,cAAc,iBAAiBnB,GAAG4D,MAAM,UAAU,IAC9EG,EAAKY,GAAGH,WAAWI,YAAYb,EAAKY,IAExChD,EAAQ4C,OAAOG,EAAgB,CAAC,UAAY,GAC/C,CACJ,IAAE,GAEHxE,SAASC,eAAe,oBAAoBiE,iBAAiB,UAAU,SAACC,GACpEjE,QAAQC,IAAIgE,EAAEC,OAAOH,SACrBzC,QAAQC,QAAQC,MAAMO,IAAI,CAAC,6BAA8BkC,EAAEC,OAAOH,SACrE,IAEDjE,SAASkE,iBAAiB,aAAa,SAAUC,GAC7C,GAAIZ,EAASY,EAAEC,OAAQ,WAAY,CAC/BlE,QAAQC,IAAIgE,EAAEQ,OACdzE,QAAQC,IAAIgE,EAAES,OACd1E,QAAQC,IAAIgE,EAAEC,OAAOS,YACrB,IAAMC,EAASf,EAAE/D,SAASiB,cAAc,eACxC6D,EAAOC,OAAOC,IAAI,CACdvE,KAAM,QACND,IAAK2D,EAAES,MAAM,KAGjBE,EAAOG,SAAS,OAAOC,KAAK,MAAOf,EAAEC,OAAOe,aAAa,OAC5D,CACJ,IAAE,GAEHnF,SAASkE,iBAAiB,YAAY,SAAUC,GACxCZ,EAASY,EAAEC,OAAQ,YACnBL,EAAE/D,SAASiB,cAAc,eAAemE,MAG/C,IAAE,GAEHpF,SAASiB,cAAc,cAAciD,iBAAiB,SAAS,WAY1C1C,QAAQ6D,QAAQC,OAVd,CACfC,KAAM,iBACNC,aAAc,eACdC,IAAK,0BACL/E,MAAO,IACPC,OAAQ,IACRF,KAAK,IACLiF,qBAAqB,IAIzBxF,QAAQC,IAAI,OACf,IAEDH,SAASiB,cAAc,YAAYiD,iBAAiB,SAAS,WAC3D1C,QAAQmE,KAAKL,OAAO,CAClBG,IAAI,yBAGP,G","sources":["webpack://imgur-uploader-firefox/./src/copy.js","webpack://imgur-uploader-firefox/./src/storage.js","webpack://imgur-uploader-firefox/webpack/bootstrap","webpack://imgur-uploader-firefox/./src/app.js"],"sourcesContent":["module.exports.setCopy = function(text){\n    const id = \"clipboard-textarea-hidden-id\";\n    let existsTextarea = document.getElementById(id);\n\n    if (!existsTextarea) {\n        console.log(\"Creating textarea\");\n        const textarea = document.createElement(\"textarea\");\n        textarea.id = id;\n        textarea.style.position = 'fixed';\n        textarea.style.top = -100;\n        textarea.style.left = -100;\n        textarea.style.width = '1px';\n        textarea.style.height = '1px';\n        textarea.style.padding = 0;\n        textarea.style.border = 'none';\n        textarea.style.outline = 'none';\n        textarea.style.boxShadow = 'none';\n        textarea.style.background = 'transparent';\n        document.querySelector(\"body\").appendChild(textarea);\n\n        existsTextarea = document.getElementById(id);\n    } else {\n        console.log(\"The textarea already exists :3\")\n    }\n    console.log(existsTextarea);\n    existsTextarea.value = text;\n    existsTextarea.select();\n\n    try {\n        const status = document.execCommand('copy');\n        if (!status) {\n            console.error(\"Cannot copy text\");\n        } else {\n            console.log(\"The text is now on the clipboard\");\n        }\n    } catch (err) {\n        console.log('Unable to copy.');\n    }\n}\n","module.exports = class Storage {\n    constructor() {\n        browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\n            if (Object.getOwnPropertyNames(obj).length == 0) {\n                console.log(\"test\");\n                browser.storage.local.set({\n                    'firefox-uploader-imgur': []\n                });\n            }\n        });\n\n    }\n\n    add(image) {\n        return new Promise((resolve, reject) => {\n            const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\n                const send = obj['firefox-uploader-imgur'];\n\n                image['viewable'] = true;\n\n                send.push(image);\n                console.log(send);\n                browser.storage.local.set({\n                    'firefox-uploader-imgur': send\n                }).then(() => {\n                    resolve(\"test\");\n                });\n            });\n        });\n\n    }\n\n    remove(imageId) {\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\n            const send = [];\n            for (let img of obj['firefox-uploader-imgur']) {\n                if (img.id != imageId) {\n                    send.push(img);\n                }\n            }\n            browser.storage.local.set({\n                'firefox-uploader-imgur': send\n            });\n        });\n    }\n    change(imageId, status) {\n        if (!imageId instanceof Array) {\n          imageId = [imageId];\n        }\n\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\n            const send = [];\n            for (let img of obj['firefox-uploader-imgur']) {\n                if (imageId.indexOf(img.id) >= 0) {\n                    console.log(imageId);\n                    console.log(status);\n                    for (let property in status) {\n                        if (status.hasOwnProperty(property)) {\n                            img[property] = status[property];\n                        }\n                    }\n                    console.log(img);\n                    send.push(img);\n                } else {\n                    send.push(img);\n                }\n            }\n            browser.storage.local.set({\n                'firefox-uploader-imgur': send\n            });\n        });\n\n    }\n    removeAll() {\n        browser.storage.local.set({\n            'firefox-uploader-imgur': []\n        })\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const Storage = require(\"./storage.js\");\nconst storage = new Storage();\nconst copy = require(\"./copy.js\");\n\nbrowser.storage.local.get('firefox-uploader-imgur').then((value) =>{\n    console.log(value);\n    for(let x of value['firefox-uploader-imgur'].reverse()){\n        console.log(x);\n        if(x == undefined || x.link == undefined || x.viewable == false){\n            continue;\n        }\n        $(document.getElementById(\"image-list\")).append('<div class=\"callout small image-url\" data-closable data-url=\"'+x.link+'\">\\\n            <p><img src=\"https://i.imgur.com/'+x.id+'.jpg\" class=\"preview\"> <span class=\"link\">'+x.link+'</span><button class=\"copy-clipboard\" id=\"'+x.link+'-copy\">Copy</button></p>\\\n            <button class=\"close-button\" aria-label=\"Dismiss alert\" type=\"button\"  id=\"'+x.id+'-close\" data-close>\\\n            <span aria-hidden=\"true\" class=\"close-button-bubble\">&times;</span>\\\n            </button>\\\n        </div>');\n\n    }\n});\n\nbrowser.storage.local.get('firefox-uploader-auto-copy').then((value) =>{\n    document.getElementById('clipboard-switch').checked = value['firefox-uploader-auto-copy'];\n});\n\nfunction hasClass(elem, className) {\n    return elem.className.split(' ').indexOf(className) > -1;\n}\ndocument.addEventListener('click', function (e) {\n    if (hasClass(e.target, 'close-button')) {\n        console.log(e.target.id);\n        storage.change(e.target.id.split(\"-close\")[0], {\"viewable\": false});\n        //storage.remove(e.target.id.split(\"-close\")[0]);\n    }\n    if(hasClass(e.target, 'close-button-bubble')){\n        console.log(e.target.id);\n        storage.change(e.target.parentNode.id.split(\"-close\")[0], {\"viewable\": false});\n    }\n    if(hasClass(e.target, 'copy-clipboard')){\n        //var link = \"https://i.imgur.com/\"+e.target.id.split(\"-copy\")[0]+\".jpg\";\n        const link = e.target.id.split(\"-copy\")[0];\n        copy.setCopy(link);\n    }\n    if (hasClass(e.target, 'clear-all')){\n        //storage.removeAll();\n\n        const link = document.querySelectorAll(\".image-url\");\n        const manipulateList = []\n        for(let i = 0;i<link.length;i++){\n            console.log(link[i].querySelector(\".close-button\").id);\n            manipulateList.push(link[i].querySelector(\".close-button\").id.split(\"-close\")[0]);\n            link[i].parentNode.removeChild(link[i]);\n        }\n        storage.change(manipulateList, {\"viewable\": false});\n    }\n}, false);\n\ndocument.getElementById('clipboard-switch').addEventListener('change', (e) => {\n    console.log(e.target.checked);\n    browser.storage.local.set({'firefox-uploader-auto-copy': e.target.checked});\n});\n\ndocument.addEventListener('mouseover', function (e) {\n    if (hasClass(e.target, 'preview')) {\n        console.log(e.pageX);\n        console.log(e.pageY);\n        console.log(e.target.attributes);\n        const viewer = $(document.querySelector(\"div.viewer\"));\n        viewer.show().css({\n            left: \"100px\",\n            top: e.pageY-30\n        });\n\n        viewer.children(\"img\").attr(\"src\", e.target.getAttribute(\"src\"));\n    }\n}, false);\n\ndocument.addEventListener('mouseout', function (e) {\n    if (hasClass(e.target, 'preview')) {\n        $(document.querySelector(\"div.viewer\")).hide();\n\n    }\n}, false);\n\ndocument.querySelector(\"#add-image\").addEventListener('click', function () {\n\n    const createData = {\n        type: \"detached_panel\",\n        titlePreface: \"Upload Image\",\n        url: \"../templates/panel.html\",\n        width: 400,\n        height: 200,\n        left:100,\n        allowScriptsToClose: true\n    };\n\n    const creating = browser.windows.create(createData);\n    console.log(\"test\");\n});\n\ndocument.querySelector(\"#options\").addEventListener('click', function(){\n  browser.tabs.create({\n    url:\"settings/options.html\"\n  })\n\n})\n"],"names":["module","exports","setCopy","text","id","existsTextarea","document","getElementById","console","log","textarea","createElement","style","position","top","left","width","height","padding","border","outline","boxShadow","background","querySelector","appendChild","value","select","execCommand","error","err","browser","storage","local","get","then","obj","Object","getOwnPropertyNames","length","set","image","Promise","resolve","reject","send","push","imageId","img","status","Array","indexOf","property","hasOwnProperty","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","require","copy","hasClass","elem","className","split","reverse","x","link","viewable","$","append","checked","addEventListener","e","target","change","parentNode","querySelectorAll","manipulateList","i","removeChild","pageX","pageY","attributes","viewer","show","css","children","attr","getAttribute","hide","windows","create","type","titlePreface","url","allowScriptsToClose","tabs"],"sourceRoot":""}