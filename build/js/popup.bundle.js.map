{"version":3,"file":"popup.bundle.js","mappings":"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","sources":["webpack://imgur-uploader-firefox/./src/copy.js","webpack://imgur-uploader-firefox/./src/storage.js","webpack://imgur-uploader-firefox/webpack/bootstrap","webpack://imgur-uploader-firefox/./src/app.js"],"sourcesContent":["module.exports.setCopy = function(text){\r\n    const id = \"clipboard-textarea-hidden-id\";\r\n    let existsTextarea = document.getElementById(id);\r\n\r\n    if (!existsTextarea) {\r\n        console.log(\"Creating textarea\");\r\n        const textarea = document.createElement(\"textarea\");\r\n        textarea.id = id;\r\n        textarea.style.position = 'fixed';\r\n        textarea.style.top = -100;\r\n        textarea.style.left = -100;\r\n        textarea.style.width = '1px';\r\n        textarea.style.height = '1px';\r\n        textarea.style.padding = 0;\r\n        textarea.style.border = 'none';\r\n        textarea.style.outline = 'none';\r\n        textarea.style.boxShadow = 'none';\r\n        textarea.style.background = 'transparent';\r\n        document.querySelector(\"body\").appendChild(textarea);\r\n\r\n        existsTextarea = document.getElementById(id);\r\n    } else {\r\n        console.log(\"The textarea already exists :3\")\r\n    }\r\n    console.log(existsTextarea);\r\n    existsTextarea.value = text;\r\n    existsTextarea.select();\r\n\r\n    try {\r\n        const status = document.execCommand('copy');\r\n        if (!status) {\r\n            console.error(\"Cannot copy text\");\r\n        } else {\r\n            console.log(\"The text is now on the clipboard\");\r\n        }\r\n    } catch (err) {\r\n        console.log('Unable to copy.');\r\n    }\r\n}\r\n","module.exports = class Storage {\r\n    constructor() {\r\n        browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            if (Object.getOwnPropertyNames(obj).length == 0) {\r\n                console.log(\"test\");\r\n                browser.storage.local.set({\r\n                    'firefox-uploader-imgur': []\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    add(image) {\r\n        return new Promise((resolve, reject) => {\r\n            const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n                const send = obj['firefox-uploader-imgur'];\r\n\r\n                image['viewable'] = true;\r\n\r\n                send.push(image);\r\n                console.log(send);\r\n                browser.storage.local.set({\r\n                    'firefox-uploader-imgur': send\r\n                }).then(() => {\r\n                    resolve(\"test\");\r\n                });\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    remove(imageId) {\r\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            const send = [];\r\n            for (let img of obj['firefox-uploader-imgur']) {\r\n                if (img.id != imageId) {\r\n                    send.push(img);\r\n                }\r\n            }\r\n            browser.storage.local.set({\r\n                'firefox-uploader-imgur': send\r\n            });\r\n        });\r\n    }\r\n    change(imageId, status) {\r\n        if (!imageId instanceof Array) {\r\n          imageId = [imageId];\r\n        }\r\n\r\n        const checkStorage = browser.storage.local.get(\"firefox-uploader-imgur\").then((obj) => {\r\n            const send = [];\r\n            for (let img of obj['firefox-uploader-imgur']) {\r\n                if (imageId.indexOf(img.id) >= 0) {\r\n                    console.log(imageId);\r\n                    console.log(status);\r\n                    for (let property in status) {\r\n                        if (status.hasOwnProperty(property)) {\r\n                            img[property] = status[property];\r\n                        }\r\n                    }\r\n                    console.log(img);\r\n                    send.push(img);\r\n                } else {\r\n                    send.push(img);\r\n                }\r\n            }\r\n            browser.storage.local.set({\r\n                'firefox-uploader-imgur': send\r\n            });\r\n        });\r\n\r\n    }\r\n    removeAll() {\r\n        browser.storage.local.set({\r\n            'firefox-uploader-imgur': []\r\n        })\r\n    }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const Storage = require(\"./storage.js\");\r\nconst storage = new Storage();\r\nconst copy = require(\"./copy.js\");\r\n\r\nbrowser.storage.local.get('firefox-uploader-imgur').then((value) =>{\r\n    console.log(value);\r\n    for(let x of value['firefox-uploader-imgur'].reverse()){\r\n        console.log(x);\r\n        if(x == undefined || x.link == undefined || x.viewable == false){\r\n            continue;\r\n        }\r\n        $(document.getElementById(\"image-list\")).append('<div class=\"callout small image-url\" data-closable data-url=\"'+x.link+'\">\\\r\n            <p><img src=\"https://i.imgur.com/'+x.id+'.jpg\" class=\"preview\"> <span class=\"link\">'+x.link+'</span><button class=\"copy-clipboard\" id=\"'+x.link+'-copy\">Copy</button></p>\\\r\n            <button class=\"close-button\" aria-label=\"Dismiss alert\" type=\"button\"  id=\"'+x.id+'-close\" data-close>\\\r\n            <span aria-hidden=\"true\" class=\"close-button-bubble\">&times;</span>\\\r\n            </button>\\\r\n        </div>');\r\n\r\n    }\r\n});\r\n\r\nbrowser.storage.local.get('firefox-uploader-auto-copy').then((value) =>{\r\n    document.getElementById('clipboard-switch').checked = value['firefox-uploader-auto-copy'];\r\n});\r\n\r\nfunction hasClass(elem, className) {\r\n    return elem.className.split(' ').indexOf(className) > -1;\r\n}\r\ndocument.addEventListener('click', function (e) {\r\n    if (hasClass(e.target, 'close-button')) {\r\n        console.log(e.target.id);\r\n        storage.change(e.target.id.split(\"-close\")[0], {\"viewable\": false});\r\n        //storage.remove(e.target.id.split(\"-close\")[0]);\r\n    }\r\n    if(hasClass(e.target, 'close-button-bubble')){\r\n        console.log(e.target.id);\r\n        storage.change(e.target.parentNode.id.split(\"-close\")[0], {\"viewable\": false});\r\n    }\r\n    if(hasClass(e.target, 'copy-clipboard')){\r\n        //var link = \"https://i.imgur.com/\"+e.target.id.split(\"-copy\")[0]+\".jpg\";\r\n        const link = e.target.id.split(\"-copy\")[0];\r\n        copy.setCopy(link);\r\n    }\r\n    if (hasClass(e.target, 'clear-all')){\r\n        //storage.removeAll();\r\n\r\n        const link = document.querySelectorAll(\".image-url\");\r\n        const manipulateList = []\r\n        for(let i = 0;i<link.length;i++){\r\n            console.log(link[i].querySelector(\".close-button\").id);\r\n            manipulateList.push(link[i].querySelector(\".close-button\").id.split(\"-close\")[0]);\r\n            link[i].parentNode.removeChild(link[i]);\r\n        }\r\n        storage.change(manipulateList, {\"viewable\": false});\r\n    }\r\n}, false);\r\n\r\ndocument.getElementById('clipboard-switch').addEventListener('change', (e) => {\r\n    console.log(e.target.checked);\r\n    browser.storage.local.set({'firefox-uploader-auto-copy': e.target.checked});\r\n});\r\n\r\ndocument.addEventListener('mouseover', function (e) {\r\n    if (hasClass(e.target, 'preview')) {\r\n        console.log(e.pageX);\r\n        console.log(e.pageY);\r\n        console.log(e.target.attributes);\r\n        const viewer = $(document.querySelector(\"div.viewer\"));\r\n        viewer.show().css({\r\n            left: \"100px\",\r\n            top: e.pageY-30\r\n        });\r\n\r\n        viewer.children(\"img\").attr(\"src\", e.target.getAttribute(\"src\"));\r\n    }\r\n}, false);\r\n\r\ndocument.addEventListener('mouseout', function (e) {\r\n    if (hasClass(e.target, 'preview')) {\r\n        $(document.querySelector(\"div.viewer\")).hide();\r\n\r\n    }\r\n}, false);\r\n\r\ndocument.querySelector(\"#add-image\").addEventListener('click', function () {\r\n\r\n    const createData = {\r\n        type: \"detached_panel\",\r\n        titlePreface: \"Upload Image\",\r\n        url: \"../templates/panel.html\",\r\n        width: 400,\r\n        height: 200,\r\n        left:100,\r\n        allowScriptsToClose: true\r\n    };\r\n\r\n    const creating = browser.windows.create(createData);\r\n    console.log(\"test\");\r\n});\r\n\r\ndocument.querySelector(\"#options\").addEventListener('click', function(){\r\n  browser.tabs.create({\r\n    url:\"settings/options.html\"\r\n  })\r\n\r\n})\r\n"],"names":["module","exports","setCopy","text","id","existsTextarea","document","getElementById","console","log","textarea","createElement","style","position","top","left","width","height","padding","border","outline","boxShadow","background","querySelector","appendChild","value","select","execCommand","error","err","browser","storage","local","get","then","obj","Object","getOwnPropertyNames","length","set","image","Promise","resolve","reject","send","push","imageId","img","status","Array","indexOf","property","hasOwnProperty","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","require","copy","hasClass","elem","className","split","reverse","x","link","viewable","$","append","checked","addEventListener","e","target","change","parentNode","querySelectorAll","manipulateList","i","removeChild","pageX","pageY","attributes","viewer","show","css","children","attr","getAttribute","hide","windows","create","type","titlePreface","url","allowScriptsToClose","tabs"],"sourceRoot":""}